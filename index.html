<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Lista Interrogazioni</title>
<style>
body{font-family:sans-serif;max-width:700px;margin:auto;padding:20px;}
input,button{padding:5px;margin:2px;}
.entry{border:1px solid #ccc;padding:5px;margin:3px;}
</style>
</head>
<body>

<h1>Interrogazioni (ordine per data)</h1>

<form id="form">
<input type="text" id="name" placeholder="Nome" required>
<input type="date" id="date" required>
<input type="text" id="note" placeholder="Nota (opzionale)">
<button>Aggiungi/Modifica</button>
</form>

<h2>Prossimo</h2>
<div id="next"></div>

<h2>Tutti</h2>
<div id="list"></div>

<script>
// Dati di prova se non collegato a Google Sheets
let entries = JSON.parse(localStorage.getItem('entries') || '[]');
let editIndex = -1;

function saveEntries() {
  localStorage.setItem('entries', JSON.stringify(entries));
  render();
}

function render() {
  entries.sort((a,b)=>new Date(a.date)-new Date(b.date));
  document.getElementById('list').innerHTML = entries.map((e,i)=>
    `<div class="entry">
      <b>${e.name}</b> — ${e.date} ${e.note? '('+e.note+')':''}
      <button onclick="edit(${i})">Modifica</button>
      <button onclick="del(${i})">Elimina</button>
      <button onclick="done(${i})">Interrogato</button>
    </div>`).join('');
  document.getElementById('next').textContent = entries.length ? entries[0].name+' — '+entries[0].date : 'Nessuna voce';
}

function edit(i){ 
  editIndex=i;
  document.getElementById('name').value=entries[i].name;
  document.getElementById('date').value=entries[i].date;
  document.getElementById('note').value=entries[i].note||'';
}

function del(i){ entries.splice(i,1); saveEntries(); }
function done(i){ entries.splice(i,1); saveEntries(); }

document.getElementById('form').onsubmit = function(e){
  e.preventDefault();
  const name=document.getElementById('name').value;
  const date=document.getElementById('date').value;
  const note=document.getElementById('note').value;
  if(editIndex>=0){ entries[editIndex]={name,date,note}; editIndex=-1; }
  else entries.push({name,date,note});
  document.getElementById('form').reset();
  saveEntries();
}

render();
</script>

</body>
</html>
